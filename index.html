code
Html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç‹æˆˆå•è¯è¿›é˜¶</title>
    <style>
        :root {
            --primary: #4834d4;
            --secondary: #686de0;
            --bg: #fdfdfd;
            --surface: #ffffff;
            --text: #2d3436;
            --success: #6ab04c;
            --error: #eb4d4b;
            --warn: #f0932b;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }

        .app-container {
            background: var(--surface);
            width: 100%;
            max-width: 480px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            padding: 30px 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        h1 { font-size: 1.8rem; color: var(--primary); margin-bottom: 10px; }
        h2 { font-size: 1.4rem; margin-bottom: 20px; }
        p { color: #636e72; line-height: 1.6; }

        /* è¾“å…¥æ¡†ä¸æŒ‰é’® */
        input[type="text"] {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            border: 2px solid #dfe6e9;
            border-radius: 12px;
            margin: 20px 0;
            box-sizing: border-box;
            transition: 0.3s;
        }
        input[type="text"]:focus { border-color: var(--primary); outline: none; }

        .btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 50px;
            cursor: pointer;
            width: 100%;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(72, 52, 212, 0.3);
            transition: transform 0.2s;
        }
        .btn:active { transform: scale(0.98); }
        .btn.outline { background: transparent; border: 2px solid var(--primary); color: var(--primary); box-shadow: none; }

        /* é¡µé¢åˆ‡æ¢ */
        .page { display: none; animation: fadeIn 0.4s ease; }
        .page.active { display: block; }

        /* ç­”é¢˜é¡µ */
        .progress-bar { height: 6px; background: #eee; border-radius: 3px; margin-bottom: 20px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s; }
        
        .word-card {
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--text);
            margin: 30px 0;
            letter-spacing: 1px;
        }

        .options-list { display: grid; gap: 12px; }
        .option-item {
            background: #f1f2f6;
            padding: 15px;
            border-radius: 12px;
            text-align: left;
            font-size: 15px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: 0.2s;
        }
        .option-item:active { background: #dfe4ea; }
        .option-item.correct { background: var(--success); color: white; border-color: var(--success); }
        .option-item.wrong { background: var(--error); color: white; border-color: var(--error); }

        /* ç»“æœé¡µ */
        .score-circle {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            border: 8px solid var(--primary);
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 25px;
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        .feedback-msg {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-bottom: 10px;
        }
        .badge-new { background: #dff9fb; color: #22a6b3; }
        .badge-review { background: #fffa65; color: #e1b12c; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="app-container">
        
        <!-- 1. ç™»å½•é¡µ -->
        <div id="page-login" class="page active">
            <h1>ç‹æˆˆå•è¯è¿›é˜¶</h1>
            <p style="font-size: 0.9rem; color: #999;">4000-6000 è¯é¢‘ | æ™ºèƒ½å¾ªç¯å¤ä¹ </p>
            <div style="margin-top: 40px;">
                <label for="username" style="display:block; text-align:left; margin-bottom:5px; color:#666; font-size:0.9rem;">è¯·è¾“å…¥æ‚¨çš„ä¸­æ–‡åå­—ï¼š</label>
                <input type="text" id="username" placeholder="ä¾‹å¦‚ï¼šç‹å°æ˜">
                <button class="btn" onclick="app.login()">è¿›å…¥å­¦ä¹ </button>
            </div>
        </div>

        <!-- 2. ç­”é¢˜é¡µ -->
        <div id="page-quiz" class="page">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span id="mode-badge" class="badge badge-new">æ–°è¯æ¨¡å¼</span>
                <span id="progress-text" style="font-size: 0.8rem; color: #aaa;">1 / 25</span>
            </div>
            <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
            
            <div class="word-card" id="current-word">Vocabulary</div>
            
            <div class="options-list" id="options-container">
                <!-- é€‰é¡¹ç”±JSæ³¨å…¥ -->
            </div>
        </div>

        <!-- 3. ç»“æœé¡µ -->
        <div id="page-result" class="page">
            <h2 id="result-title">æµ‹è¯•å®Œæˆ</h2>
            <div class="score-circle" id="score-display">0</div>
            
            <div class="feedback-msg" id="warm-message"></div>

            <div id="review-alert" style="display:none; color: var(--error); font-size: 0.9rem; margin-bottom: 15px;">
                âš ï¸ æ ¹æ®è§„åˆ™ï¼Œé”™é¢˜è¡¥æµ‹å¿…é¡»è¾¾åˆ° 100åˆ† æ‰èƒ½é€šè¿‡ã€‚
            </div>

            <button class="btn" id="next-btn" onclick="app.handleNextStep()">ç»§ç»­</button>
        </div>

    </div>

    <script>
        // --- æ¨¡æ‹Ÿ 4000-6000 è¯é¢‘æ ¸å¿ƒè¯åº“ (ç¤ºä¾‹50ä¸ª) ---
        // å®é™…ä½¿ç”¨æ—¶ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰©å……åˆ°å‡ åƒä¸ª
        const WORD_DB = [
            {en:"Analogy", zh:"ç±»æ¯”"}, {en:"Bureaucracy", zh:"å®˜åƒšä¸»ä¹‰"}, {en:"Coalition", zh:"è”ç›Ÿ"},
            {en:"Dilemma", zh:"è¿›é€€ä¸¤éš¾"}, {en:"Empirical", zh:"ç»éªŒä¸»ä¹‰çš„"}, {en:"Fiscal", zh:"è´¢æ”¿çš„"},
            {en:"Hierarchy", zh:"ç­‰çº§åˆ¶åº¦"}, {en:"Ideology", zh:"æ„è¯†å½¢æ€"}, {en:"Jurisdiction", zh:"ç®¡è¾–æƒ"},
            {en:"Kinetic", zh:"åŠ¨åŠ›å­¦çš„"}, {en:"Legislation", zh:"ç«‹æ³•"}, {en:"Metaphor", zh:"éšå–»"},
            {en:"Nuance", zh:"ç»†å¾®å·®åˆ«"}, {en:"Optimism", zh:"ä¹è§‚ä¸»ä¹‰"}, {en:"Paradigm", zh:"èŒƒä¾‹"},
            {en:"Quantum", zh:"é‡å­"}, {en:"Rhetoric", zh:"ä¿®è¾"}, {en:"Sovereignty", zh:"ä¸»æƒ"},
            {en:"Trajectory", zh:"è½¨è¿¹"}, {en:"Utilitarian", zh:"åŠŸåˆ©ä¸»ä¹‰çš„"}, {en:"Verdict", zh:"è£å†³"},
            {en:"Welfare", zh:"ç¦åˆ©"}, {en:"Aesthetic", zh:"å®¡ç¾çš„"}, {en:"Bias", zh:"åè§"},
            {en:"Commodity", zh:"å•†å“"}, {en:"Deficit", zh:"èµ¤å­—"}, {en:"Ethics", zh:"ä¼¦ç†"},
            {en:"Fluctuate", zh:"æ³¢åŠ¨"}, {en:"Governance", zh:"æ²»ç†"}, {en:"Hypothesis", zh:"å‡è®¾"},
            {en:"Incentive", zh:"æ¿€åŠ±"}, {en:"Legacy", zh:"é—äº§"}, {en:"Mandate", zh:"æˆæƒ"},
            {en:"Notion", zh:"æ¦‚å¿µ"}, {en:"Outsource", zh:"å¤–åŒ…"}, {en:"Protocol", zh:"åè®®"},
            {en:"Quota", zh:"é…é¢"}, {en:"Revenue", zh:"ç¨æ”¶/æ”¶å…¥"}, {en:"Sector", zh:"éƒ¨é—¨"},
            {en:"Tariff", zh:"å…³ç¨"}, {en:"Underlie", zh:"ä½äº...ä¹‹ä¸‹"}, {en:"Valid", zh:"æœ‰æ•ˆçš„"},
            {en:"Widespread", zh:"å¹¿æ³›çš„"}, {en:"Yield", zh:"å±ˆæœ/äº§é‡"}, {en:"Zone", zh:"åŒºåŸŸ"},
            {en:"Abstract", zh:"æŠ½è±¡çš„"}, {en:"Bulk", zh:"ä½“ç§¯/å¤§æ‰¹"}, {en:"Compatible", zh:"å…¼å®¹çš„"}
        ];

        const BATCH_SIZE = 25; // æ¯æ¬¡è€ƒ25ä¸ª

        class WangGeVocabApp {
            constructor() {
                this.user = "";
                this.data = {
                    progressIndex: 0, // åœ¨å¤§è¯åº“ä¸­çš„è¿›åº¦
                    wrongQueue: []    // å¾…å¤ä¹ çš„é”™é¢˜æ•°ç»„
                };
                this.currentSession = []; // æœ¬æ¬¡è€ƒè¯•çš„è¯åˆ—è¡¨
                this.sessionWrong = [];   // æœ¬æ¬¡åˆšåšé”™çš„è¯
                this.currentIndex = 0;
                this.isReviewMode = false;
                this.canClick = true;
            }

            // 1. ç™»å½•ä¸æ¨¡å¼åˆ¤æ–­
            login() {
                const input = document.getElementById('username');
                const name = input.value.trim();
                if (!name) return alert("åŒå­¦ï¼Œè¯·å…ˆè¾“å…¥æ‚¨çš„åå­—å“¦ï¼");
                
                this.user = name;
                this.loadData();
                this.startSession();
            }

            loadData() {
                const key = `wangge_vocab_${this.user}`;
                const stored = localStorage.getItem(key);
                if (stored) {
                    this.data = JSON.parse(stored);
                } else {
                    // æ–°ç”¨æˆ·åˆå§‹åŒ–
                    this.data = { progressIndex: 0, wrongQueue: [] };
                }
            }

            saveData() {
                localStorage.setItem(`wangge_vocab_${this.user}`, JSON.stringify(this.data));
            }

            startSession() {
                // æ ¸å¿ƒé€»è¾‘ï¼šä¼˜å…ˆæ£€æŸ¥æ˜¯å¦æœ‰å¾…å¤ä¹ çš„è¯
                if (this.data.wrongQueue.length > 0) {
                    this.isReviewMode = true;
                    this.currentSession = [...this.data.wrongQueue]; // å¤åˆ¶ä¸€ä»½
                    alert(`${this.user}åŒå­¦ï¼Œæ£€æµ‹åˆ°æ‚¨ä¸Šæ¬¡æœ‰ ${this.currentSession.length} ä¸ªå•è¯æœªæŒæ¡ã€‚\nä¸ºäº†å·©å›ºåŸºç¡€ï¼Œæœ¬æ¬¡ä¸ºã€é”™é¢˜è¡¥æµ‹ã€‘ã€‚\n\nè¦æ±‚ï¼šå¿…é¡»æ»¡åˆ†ï¼ˆ100åˆ†ï¼‰æ‰èƒ½é€šè¿‡ï¼`);
                } else {
                    this.isReviewMode = false;
                    // æ£€æŸ¥æ˜¯å¦èƒŒå®Œäº†
                    if (this.data.progressIndex >= WORD_DB.length) {
                        alert("å¤ªæ£’äº†ï¼æ‚¨å·²ç»èƒŒå®Œäº†åº“é‡Œçš„æ‰€æœ‰å•è¯ï¼");
                        this.data.progressIndex = 0; // ç®€å•å¾ªç¯ï¼Œå®é™…å¯æç¤ºç»“æŸ
                    }
                    // å–æ–°è¯
                    this.currentSession = WORD_DB.slice(this.data.progressIndex, this.data.progressIndex + BATCH_SIZE);
                }

                this.currentIndex = 0;
                this.sessionWrong = [];
                this.showPage('page-quiz');
                this.renderQuizUI();
                this.renderQuestion();
            }

            // 2. æ¸²æŸ“é¢˜ç›®
            renderQuizUI() {
                const badge = document.getElementById('mode-badge');
                if (this.isReviewMode) {
                    badge.textContent = "å¤ä¹ è¡¥æµ‹";
                    badge.className = "badge badge-review";
                } else {
                    badge.textContent = "æ–°è¯è¿›é˜¶";
                    badge.className = "badge badge-new";
                }
            }

            renderQuestion() {
                this.canClick = true;
                const wordObj = this.currentSession[this.currentIndex];
                
                // UI æ›´æ–°
                document.getElementById('current-word').textContent = wordObj.en;
                document.getElementById('progress-text').textContent = `${this.currentIndex + 1} / ${this.currentSession.length}`;
                const percent = ((this.currentIndex) / this.currentSession.length) * 100;
                document.getElementById('progress-fill').style.width = `${percent}%`;

                // é€‰é¡¹ç”Ÿæˆ
                const container = document.getElementById('options-container');
                container.innerHTML = '';
                
                // 1å¯¹3é”™
                let options = [wordObj];
                while(options.length < 4) {
                    const rand = WORD_DB[Math.floor(Math.random() * WORD_DB.length)];
                    if (!options.find(o => o.en === rand.en)) options.push(rand);
                }
                options.sort(() => Math.random() - 0.5); // æ‰“ä¹±

                options.forEach(opt => {
                    const div = document.createElement('div');
                    div.className = 'option-item';
                    div.textContent = opt.zh;
                    div.onclick = () => this.handleAnswer(opt, wordObj, div);
                    container.appendChild(div);
                });
            }

            // 3. ç­”é¢˜äº¤äº’
            handleAnswer(selected, correct, el) {
                if (!this.canClick) return;
                this.canClick = false;

                const isRight = selected.en === correct.en;
                
                if (isRight) {
                    el.classList.add('correct');
                } else {
                    el.classList.add('wrong');
                    // æ ‡å‡ºæ­£ç¡®ç­”æ¡ˆ
                    const allOpts = document.querySelectorAll('.option-item');
                    allOpts.forEach(opt => {
                        if (opt.textContent === correct.zh) opt.classList.add('correct');
                    });
                    this.sessionWrong.push(correct);
                }

                setTimeout(() => {
                    this.currentIndex++;
                    if (this.currentIndex < this.currentSession.length) {
                        this.renderQuestion();
                    } else {
                        this.finishSession();
                    }
                }, 800);
            }

            // 4. ç»“ç®—ä¸åé¦ˆ
            finishSession() {
                this.showPage('page-result');
                const total = this.currentSession.length;
                const correctCount = total - this.sessionWrong.length;
                const score = Math.round((correctCount / total) * 100);

                // æ˜¾ç¤ºåˆ†æ•°
                const scoreEl = document.getElementById('score-display');
                scoreEl.textContent = score;
                scoreEl.style.borderColor = score === 100 ? 'var(--success)' : (score < 60 ? 'var(--error)' : 'var(--primary)');
                scoreEl.style.color = scoreEl.style.borderColor;

                // ç”Ÿæˆæš–å¿ƒè¯æœ¯
                const msgEl = document.getElementById('warm-message');
                msgEl.innerHTML = this.getWarmMessage(score);

                const nextBtn = document.getElementById('next-btn');
                const reviewAlert = document.getElementById('review-alert');

                // æ ¸å¿ƒé€»è¾‘å¤„ç†
                if (this.isReviewMode) {
                    // --- å¤ä¹ æ¨¡å¼ ---
                    if (score === 100) {
                        // è¡¥æµ‹é€šè¿‡
                        this.data.wrongQueue = []; // æ¸…ç©ºé”™é¢˜åº“
                        this.saveData();
                        reviewAlert.style.display = 'none';
                        nextBtn.textContent = "å¤ªæ£’äº†ï¼å»èƒŒæ–°å•è¯";
                        nextBtn.onclick = () => this.startSession(); // ä¼šè‡ªåŠ¨è¿›å…¥æ–°è¯æ¨¡å¼
                    } else {
                        // è¡¥æµ‹æœªæ»¡åˆ†
                        reviewAlert.style.display = 'block';
                        reviewAlert.textContent = `æœ¬æ¬¡å¾—åˆ† ${score}åˆ†ï¼Œæœªè¾¾åˆ°æ»¡åˆ†è¦æ±‚ã€‚è¯·é‡æ–°è¡¥æµ‹ï¼`;
                        nextBtn.textContent = "é‡æ–°å¼€å§‹è¡¥æµ‹";
                        nextBtn.onclick = () => this.startSession(); // é‡æ–°è€ƒå½“å‰é”™é¢˜é˜Ÿåˆ—
                    }
                } else {
                    // --- æ–°è¯æ¨¡å¼ ---
                    // æ— è®ºå¤šå°‘åˆ†ï¼Œæ–°è¯è¿›åº¦éƒ½å‘å‰èµ°ï¼Œä½†é”™é¢˜è¦å­˜ä¸‹æ¥ä¸‹æ¬¡è€ƒ
                    reviewAlert.style.display = 'none';
                    
                    if (this.sessionWrong.length > 0) {
                        this.data.wrongQueue = this.sessionWrong; // å­˜å…¥é”™é¢˜æœ¬
                        nextBtn.textContent = "ä¿å­˜è¿›åº¦å¹¶é€€å‡º"; 
                        // å¦‚æœæƒ³è®©ç”¨æˆ·è¿ç»­èƒŒï¼Œè¿™é‡Œå¯ä»¥æ˜¯ "ç»§ç»­"ï¼Œä½†ä¸‹æ¬¡è¿›æ¥å¾—å…ˆè€ƒé”™é¢˜
                        // ä¸ºäº†é€»è¾‘é—­ç¯ï¼Œå»ºè®®è®©ç”¨æˆ·ä¼‘æ¯ï¼Œæˆ–è€…ç‚¹å‡»ååˆ·æ–°é¡µé¢
                        nextBtn.onclick = () => { alert("è¿›åº¦å·²ä¿å­˜ï¼Œä¸‹æ¬¡è®°å¾—å…ˆå¤ä¹ å“¦ï¼"); location.reload(); };
                    } else {
                        nextBtn.textContent = "çŠ¶æ€æä½³ï¼èƒŒä¸‹ä¸€ç»„";
                        nextBtn.onclick = () => this.startSession();
                    }
                    
                    // æ›´æ–°æ€»è¿›åº¦
                    this.data.progressIndex += this.currentSession.length;
                    this.saveData();
                }
            }

            getWarmMessage(score) {
                let text = "";
                if (score === 100) {
                    text = `å“‡ï¼<b>${this.user}</b>åŒå­¦ï¼Œä½ çœŸæ˜¯å¤ªä¼˜ç§€äº†ï¼<br>ğŸ’¯ æ»¡åˆ†é€šè¿‡ï¼Œä¸ä»…è®°å¿†åŠ›è¶…ç¾¤ï¼Œæ›´ä½“ç°äº†ä½ çš„ä¸“æ³¨ä¸åŠªåŠ›ã€‚ç»§ç»­ä¿æŒè¿™ä»½å…‰èŠ’ï¼`;
                } else if (score >= 80) {
                    text = `åšå¾—å¾ˆå¥½ï¼Œ<b>${this.user}</b>åŒå­¦ï¼<br>ğŸŒŸ æ‹¿åˆ°äº† ${score} åˆ†çš„é«˜åˆ†ã€‚è™½ç„¶æœ‰ä¸€ç‚¹å°ç‘•ç–µï¼Œä½†ä½ çš„è¯æ±‡é‡å·²ç»ä»¤äººåˆ®ç›®ç›¸çœ‹ã€‚åªè¦å†åšæŒä¸€ä¸‹ï¼Œæ»¡åˆ†å°±åœ¨çœ¼å‰ï¼`;
                } else if (score >= 60) {
                    text = `åŠ æ²¹ï¼Œ<b>${this.user}</b>åŒå­¦ã€‚<br>ğŸ’ª è¿™æ¬¡è€ƒäº† ${score} åˆ†ã€‚èƒŒå•è¯æ˜¯ä¸€åœºé©¬æ‹‰æ¾ï¼Œä¸è¦åœ¨æ„ä¸€æ—¶çš„å¾—å¤±ã€‚æ­¤æ—¶æ­¤åˆ»çš„åŠªåŠ›ï¼Œæœªæ¥éƒ½ä¼šå˜æˆä½ çš„åº•æ°”ï¼`;
                } else {
                    text = `åˆ«æ°”é¦ï¼Œ<b>${this.user}</b>åŒå­¦ã€‚<br>ğŸŒ± ä¸‡äº‹å¼€å¤´éš¾ï¼Œè¿™ä¸€æ¬¡æˆ‘ä»¬è™½ç„¶é‡åˆ°äº†æŒ«æŠ˜ï¼Œä½†è¿™æ­£æ˜¯æˆé•¿çš„å¥‘æœºã€‚è°ƒæ•´å¿ƒæ€ï¼Œæˆ‘ä»¬é‡æ–°æ¥è¿‡ï¼Œæˆ‘ç›¸ä¿¡ä½ ä¸€å®šè¡Œï¼`;
                }
                return text;
            }

            handleNextStep() {
                // æ­¤å‡½æ•°é€»è¾‘å·²åœ¨ finishSession ä¸­åŠ¨æ€ç»‘å®š
            }

            showPage(id) {
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                document.getElementById(id).classList.add('active');
            }
        }

        const app = new WangGeVocabApp();
    </script>
</body>
</html>
